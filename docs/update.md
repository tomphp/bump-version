# Update Command

The `update` command is used to update all locations with the provided version.
You can use `--help` to learn more about the command:

```shell, script()
versioned-files update --help
```

```text, verify()
Updates the version in all known locations

Usage: versioned-files update <VERSION>

Arguments:
  <VERSION>  The new value to be used when representing a value

Options:
  -h, --help  Print help
```

## Type of update

There are different types of update that can be performed.

### `!string-pattern`

String pattern simply replaces any string that matches the provided pattern.
The pattern is an exact string with a `{{version}}` placeholder where the version should go.

Given a file `README.md` which contains:

```text, file(path="README.md")
# Example Project Docs

The current version is `v2.3.16`
```

And a `versioned-files.yml` file which contains:

```yaml, file(path="versioned-files.yml")
locations:
  - !string-pattern
    file: README.md
    pattern: The current version is `v{{version}}`
```

Running:

```shell, script(expected_exit_code=0)
versioned-files update 2.4.1
```

Will output:

```text, verify()
Updating README.md...success
```

And will update `README.md` so that:

```shell, script()
cat README.md
```

Will output:

```text, verify()
# Example Project Docs

The current version is `v2.4.1`
```

## `!cargo`

Given a file `Cargo.toml` which contains:

```toml, file(path="Cargo.toml")
[package]
name = "example-project"
version = "0.2.1"
edition = "2021"
```

```shell, script()
mkdir src
```
And given file `src/main.rs`
```rust, file(path="src/main.rs")
fn main() {
    println!("Hello, World!");
}
```

```shell, script()
cargo update
```

And a `versioned-files.yml` file which contains:

```yaml, file(path="versioned-files.yml")
locations:
  - !cargo
```

Running:

```shell, script(expected_exit_code=0)
versioned-files update 1.0.0
```

Will output:

```text, verify()
Updating Cargo.toml...success
Updating Cargo.lock...success
```

And will update `Cargo.toml` so that:

```shell, script()
cat Cargo.toml
```

Will output:

```toml, verify()
[package]
name = "example-project"
version = "1.0.0"
edition = "2021"
```

And:

```shell, script()
cat Cargo.lock
```

Will output:

```toml, verify()
# This file is automatically @generated by Cargo.
# It is not intended for manual editing.
version = 3

[[package]]
name = "example-project"
version = "1.0.0"
```
